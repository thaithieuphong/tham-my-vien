<link rel="stylesheet" href="/css/root.css">
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasWithBackdrop"
    aria-labelledby="offcanvasWithBackdropLabel">
    <div class="offcanvas-header bg-dark border-bottom">
        <h5 class="offcanvas-title text-white" id="offcanvasWithBackdropLabel">BẢNG ĐIỀU KHIỂN</h5>
        <button type="button" class="btn-close text-reset btn-light" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body container-sidebar bg-dark">
        <div class="sidebar-item">
            <a href="/manager/assistant" class="sidebar-item-title pl-3">
                <i class="ti-dashboard mr-3"></i>Điều phối phiếu phẩu thuật
            </a>
        </div>
        <div class="sidebar-item">
            <a href="/manager/assistant/coordinator-re-examination" class="sidebar-item-title pl-3">
                <i class="ti-headphone-alt mr-3"></i>Điều phối phiếu tái khám
            </a>
        </div>
		<div class="sidebar-item">
            <a href="/manager/assistant/customer" class="sidebar-item-title pl-3">
                <i class="ti-user mr-3 active"></i>Khách hàng
            </a>
        </div>
        <div class="sidebar-item">
            <a href="/manager/assistant/service-note" class="sidebar-item-title pl-3">
                <i class="ti-cut mr-3"></i>Phiếu phẩu thuật
            </a>
        </div>
        <div class="sidebar-item">
            <a href="/manager/assistant/re-examination" class="sidebar-item-title pl-3">
                <i class="ti-clipboard mr-3"></i>Phiếu tái khám
            </a>
        </div>
    </div>
    <div class="offcanvas-footer bg-dark border-top">
        <div class="sidebar-item">
            <a href="/manager/assistant/profile" class="sidebar-item-title pl-3">
                <i class="ti-user mr-3"></i>Thông tin người dùng
            </a>
        </div>
		<div class="sidebar-item">
			<form method="POST" action="/logout">
				<button href="/logout" class="btn btn-danger logout-btn" type="submit">Đăng xuất</>
			</form>
		</div>
    </div>
</div>
<div class="sticky-top">
    <nav class="navbar navbar-light bg-dark">
        <div class="img-container">
        </div>
        <div class="text-light text-uppercase fw-bold">
            {{this.title}}
        </div>
        <button class="btn btn-outline-light" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasWithBackdrop" aria-controls="offcanvasWithBackdrop"><i
                class="ti-menu"></i>
        </button>
    </nav>
</div>
<div class="mt-3 ml-3 mr-3">
    <div class="row">
        {{#each reexams}}
        <div class="col-xl-3 col-lg-4 col-md-4 col-sm-6">
            <div class="card mb-3">
                <div class="card-header bg-transparent d-flex justify-content-between">
                    <div class="text-success">
                        {{formatDate this.schedule}}
                    </div>
                    <div class="text-danger">
                        {{this.status}}
                    </div>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <label class="form-label" for=""><strong>Khách hàng:</strong></label>
                        <div class="text-primary form-label text-uppercase">
                            {{this.customerID.firstName}} {{this.customerID.lastName}}
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label class="form-label" for=""><strong>Giới tính:</strong></label>
                        <div class="form-label">
                            {{this.customerID.gender}}
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label class="form-label" for=""><strong>Liên hệ:</strong></label>
                        <div class="text-primary form-label">
                            0{{this.customerID.phone}}
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label class="form-label" for=""><strong>Dịch vụ:</strong></label>
                        <div class="form-label">
                            {{this.service}}
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label class="form-label" for=""><strong>Phí dịch vụ:</strong></label>
                        <div class="text-danger form-label">
                            {{this.price}} VND
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-transparent d-flex justify-content-end">
                    <button type="button" class="btn btn-primary btn-mobile" data-bs-toggle="modal"
                        data-bs-target="#add-performer-re-exam-modal" data-re-exam-id="{{this._id}}"
                        data-re-exam-customerID="{{this.customerID._id}}"
                        data-re-exam-name="{{this.customerID.firstName}} {{this.customerID.lastName}}"
                        data-re-exam-birth="{{this.customerID.birth}}"
                        data-re-exam-gender="{{this.customerID.gender}}"
                        data-re-exam-email="{{this.customerID.email}}"
                        data-re-exam-phone="{{this.customerID.phone}}"
                        data-re-exam-address="{{this.customerID.address}}"
                        data-re-exam-createName="{{this.createName.firstName}} {{this.createName.lastName}}"
                        data-re-exam-service="{{this.serviceNoteId.service}}"
                        data-re-exam-schedule="{{this.schedule}}" {{#each comments}}
                        data-re-exam-comment="{{this.comment}}" {{/each}}>Điều phối
                    </button>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
</div>

<!-- Modal Add Performer reexam-->
<div class="modal fade" id="add-performer-re-exam-modal" tabindex="-1" aria-labelledby="add-performer"
    aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h5 class="modal-title text-light" id="add-performer-title">Phiếu phẩu thuật</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" id="add-performer-re-exam-form">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Khách hàng:</strong>&nbsp;
                                </label>
                                <label class="text-uppercase text-danger" id="add-performer-re-exam-firstLastName" name="name" readonly>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Ngày sinh:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-birth" name="birth" readonly></label>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Giới tính:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-gender" name="gender" readonly></label>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Email:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-email" class="d-inline-block text-truncate text-truncate-service" name="email" readonly></label>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Số điện thoại:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-phone" name="phone" readonly></label>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Địa chỉ:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-address" name="address" readonly></label>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Người tạo:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-createName" readonly></label>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <label for="status">
                                    <strong>Dịch vụ:</strong>&nbsp;
                                </label>
                                <label id="add-performer-re-exam-service" readonly></label>
                            </div>
                            <hr>
                        </div>
                        <div class="col-md-6 verticalLine">
                            <div class="container-table mb-3">
                                <div class="mb-3">
                                    <label for="performer" class="form-label">
                                        <h6><strong>Chọn bác sĩ</strong></h6>
                                    </label>
                                    <select id="select-performer" class="chosen-select" multiple tabindex="6" name="performer">
                                        {{#each user1s}}
                                        <option value="{{this._id}}">
                                            {{this.firstName}}
                                            {{this.lastName}}</option>

                                        {{/each}}
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="nursing" class="form-label">
                                        <h6><strong>Chọn Điều dưỡng</strong></h6>
                                    </label>
                                    <select id="select-nursing" class="chosen-select" multiple tabindex="6"
                                        name="nursing[]">
                                        {{#each user2s}}
                                        <option value="{{this._id}}">
                                            {{this.firstName}}
                                            {{this.lastName}}</option>

                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                            <div class="container-card mb-3">
                                <label for="performer" class="form-label">
                                    <h6><strong>Chọn bác sĩ và điều dưỡng</strong></h6>
                                </label>
                                <div id="list1" class="dropdown-check-list container-card" tabindex="100">
                                    <span class="anchor ">Chọn bác sĩ và điều dưỡng</span>
                                    <ul class="items">
                                        {{#each user1s}}
                                        <li>
                                            <hr>
                                            <label class="form-check " for="{{this._id}}">
                                                <input type="checkbox" class="mt-2" id="{{this._id}}"
                                                    value="{{this._id}}" name="performer" /> <strong
                                                    class="text-success">Bác sĩ:</strong>
                                                <label for="{{this._id}}">{{this.firstName}} {{this.lastName}}</label>
                                            </label>
                                        </li>
                                        {{/each}}
                                        {{#each user2s}}
                                        <li>
                                            <hr>
                                            <label class="form-check " for="{{this._id}}">
                                                <input type="checkbox" class="mt-2" id="{{this._id}}"
                                                    value="{{this._id}}" name="nursing" /><strong class="text-success"> Điều dưỡng:</strong>
                                                <label for="{{this._id}}">{{this.firstName}} {{this.lastName}}</label>
                                            </label>
                                        </li>
                                        {{/each}}
                                    </ul>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="gender" class="form-label">
                                    <h6><strong>Ngày hẹn</strong></h6>
                                </label>
                                <div type="text" class="form-control mb-3" id="add-performer-re-exam-schedule" name="schedule">
                            </div>

                            <div class="mb-3">
                                <label for="comment" class="form-label">
                                    <h6><strong>Ghi chú:</strong></h6>
                                </label>
                                <textarea class="form-control bg-white" id="add-performer-re-exam-comment" rows="6"
                                    name="comment" readonly></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng lại</button>
                <button type="button" id="add-performer-re-exam-btn" class="btn btn-primary">Cập nhật</button>
            </div>
        </div>
    </div>
</div>

<script src="/js/assistant/assistant-re-exam.js"></script>

<link rel="stylesheet" href="/css/root.css">
<link rel="stylesheet" href="/css/assistant.css">
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasWithBackdrop"
    aria-labelledby="offcanvasWithBackdropLabel">
    <div class="offcanvas-header bg-dark border-bottom">
        <h5 class="offcanvas-title text-white" id="offcanvasWithBackdropLabel">BẢNG ĐIỀU KHIỂN</h5>
        <button type="button" class="btn-close text-reset btn-light" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body container-sidebar bg-dark">
        <div class="sidebar-item">
            <a href="/reception/employ" class="sidebar-item-title pl-3">
                <i class="ti-receipt mr-3"></i>Phiếu phẩu thuật
            </a>
        </div>
		<div class="sidebar-item">
            <a href="/reception/employ/re-exam" class="sidebar-item-title pl-3">
                <i class="ti-user mr-3"></i>Phiếu tái khám
            </a>
        </div>
    </div>
	<div class="offcanvas-footer bg-dark border-top">
        <div class="sidebar-item">
            <a href="/reception/employ/profile" class="sidebar-item-title pl-3">
                <i class="ti-user mr-3"></i>Thông tin người dùng
            </a>
        </div>
		<div class="sidebar-item">
			<form method="POST" action="/logout">
				<button href="/logout" class="btn btn-danger logout-btn" type="submit">Đăng xuất</>
			</form>
		</div>
    </div>
</div>
<div class="sticky-top">
    <nav class="navbar navbar-light bg-dark">
        <div class="img-container">
        </div>
        <div class="text-light text-uppercase fw-bold">
            {{this.title}}
        </div>
        <button class="btn btn-outline-light" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasWithBackdrop" aria-controls="offcanvasWithBackdrop"><i
                class="ti-menu"></i>
        </button>
    </nav>
</div>
<div class="container-fluid mt-3">
	<div id="search-items">
		<div class="row">
			{{#each serviceNotes}}
			<div class="col-xl-4 col-lg-4 col-md-4 col-sm-6">
				<div class="card mb-3">
					<div class="card-header bg-transparent">
						<div class="d-flex justify-content-between">
							<strong>
								<label name="schedule" class="form-label text-success">{{formatDate this.schedule}}</label>
							</strong>
							<strong name="status" class="form-label text-danger">{{this.status}}</strong>
						</div>
					</div>
					<div class="card-body">
						<div class="d-flex justify-content-between">
							<strong>
								<label class="form-label">Khách hàng: </label>
							</strong>
							<label class="text-primary form-label text-right">
								{{this.customerID.firstName}} {{this.customerID.lastName}}
							</label>
						</div>
						<div class="d-flex justify-content-between">
							<strong>
								<label class="form-label">Liên hệ: </label>
							</strong>
							<label class="text-primary form-label text-right">
								0{{this.customerID.phone}}
							</label>
						</div>
						<div class="d-flex justify-content-between">
							<strong>
								<label class="form-label">Giới tính: </label>
							</strong>
							<label class="form-label text-right">{{this.customerID.gender}}</label>
						</div>
						<div class="d-flex justify-content-between">
							<strong>
								<label class="form-label">Thành giá: </label>
							</strong>
							<label class="form-label text-danger text-right">
								{{ this.price}} VND
							</label>
						</div>
						<div class="d-flex justify-content-between">
							<strong>
								<label class="form-label">Dịch vụ: </label>
							</strong>
							<label class="form-label text-right">{{this.service}}</label>
						</div>
					</div>
					<div class="card-footer bg-transparent d-flex justify-content-end">
						<button type="button" class="btn btn-primary btn-mobile" data-bs-toggle="modal"
							data-bs-target="#add-performer-modal" data-id="{{this._id}}"
							data-customerID="{{this.customerID._id}}"
							data-name="{{this.customerID.firstName}} {{this.customerID.lastName}}"
							data-birth="{{this.customerID.birth}}" data-gender="{{this.customerID.gender}}"
							data-email="{{this.customerID.email}}" data-phone="{{this.customerID.phone}}"
							data-address="{{this.customerID.address}}"
							data-createName="{{this.createName.firstName}} {{this.createName.lastName}}"
							data-service="{{this.service}}" data-schedule="{{this.schedule}}" {{#each
							comments}} data-comment="{{this.comment}}" {{/each}}>
							Điều phối
						</button>
					</div>
				</div>
			</div>
			{{/each}}
		</div>
	</div>
</div>

<!-- Modal Add Performer-->

<div class="modal fade" id="add-performer-modal" tabindex="-1" aria-labelledby="add-performer" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header bg-info text-light">
				<h5 class="modal-title text-light" id="add-performer-title">Phiếu phẩu thuật</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form method="POST" id="add-performer-form">
					<div class="row">
						<div class="col-md-6">
							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="name">Khách hàng:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label class="text-uppercase text-danger" id="add-performer-firstLastName"
											name="name" readonly>
									</em>
								</div>
							</div>

							<hr>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="birth">Ngày sinh:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label id="add-performer-birth" name="birth" readonly></label>
									</em>
								</div>
							</div>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="gender">Giới tính:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label id="add-performer-gender" name="gender" readonly></label>
									</em>
								</div>
							</div>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="email">Email:</label>
									</strong>
								</div>
								<div class="col-sm-6">
									<em>
										<label id="add-performer-email"
											class="d-inline-block text-truncate text-truncate-service" name="email"
											readonly></label>
									</em>
								</div>
							</div>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="phone">Số điện thoại:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label id="add-performer-phone" name="phone" readonly></label>
									</em>
								</div>
							</div>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="address">Địa chỉ:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label id="add-performer-address" name="address" readonly></label>
									</em>
								</div>

							</div>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="createName">Người tạo:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label id="add-performer-createName" readonly></label>
									</em>
								</div>
							</div>

							<div class=" mb-3 row">
								<div class="col-sm-6">
									<strong>
										<label for="service">Dịch vụ:</label>
									</strong>
								</div>
								<div class="col-sm-6 ">
									<em>
										<label id="add-performer-service" readonly></label>
									</em>
								</div>
							</div>
						</div>
						<div class="col-md-6 verticalLine">
							<div class="mb-3">
								<label for="performer" class="form-label container-table">
									<h6>Chọn bác sĩ</h6>
								</label>
								<select id="select-performer" class="chosen-select container-table" multiple
									tabindex="6" name="performer">
									{{#each user1s}}
									<option value="{{this._id}}">
										{{this.firstName}}
										{{this.lastName}}</option>
									{{/each}}
								</select>

								<label for="performer" class="form-label container-card">
									<h6>Chọn bác sĩ và điều dưỡng</h6>
								</label>
								<div id="list1" class="dropdown-check-list container-card" tabindex="100">
									<span class="anchor">Chọn bác sĩ và điều dưỡng</span>
									<ul class="items">
										{{#each user1s}}
										<li>
											<hr>
											<label class="form-check " for="{{this._id}}">
												<input type="checkbox" class="mt-2" id="{{this._id}}"
													value="{{this._id}}" name="performer" /> <strong
													class="text-success">Bác sĩ:</strong>
												<label for="{{this._id}}">{{this.firstName}} {{this.lastName}}</label>
											</label>
										</li>
										{{/each}}
										{{#each user2s}}
										<li>
											<hr>
											<label class="form-check " for="{{this._id}}">
												<input type="checkbox" class="mt-2" id="{{this._id}}"
													value="{{this._id}}" name="nursing" /><strong class="text-success"> Điều dưỡng:</strong>
												<label for="{{this._id}}">{{this.firstName}} {{this.lastName}}</label>
											</label>
										</li>
										{{/each}}

									</ul>
								</div>
							</div>
							<div class="mb-3">
								<label for="nursing" class="form-label container-table">
									<h6>Chọn Điều dưỡng</h6>
								</label>
								<select id="select-nursing" class="chosen-select container-table" multiple tabindex="6"
									name="nursing[]">
									{{#each user2s}}
									<option value="{{this._id}}">
										{{this.firstName}}
										{{this.lastName}}</option>
									{{/each}}
								</select>
							</div>
							<div class="mb-3">
								<label for="gender" class="form-label">
									<h6>Ngày hẹn</h6>
								</label>
								<div type="text" class="form-control" id="add-performer-schedule" name="schedule"></div>
							</div>

							<div class="mb-3">
								<label for="comment" class="form-label">
									<h6>Ghi chú: </h6>
								</label>
								<textarea class="form-control bg-white" id="add-performer-comment" rows="6" name="comment"
									readonly></textarea>
							</div>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng lại</button>
				<button type="button" id="add-performer-btn" class="btn btn-primary">Cập nhật</button>
			</div>
		</div>
	</div>
</div>

<script src="/js/reception/reception-service-note.js"></script>
<link rel="stylesheet" href="/css/root.css">
<link rel="stylesheet" href="/css/assistant.css">
<div class="row me-0 pe-0">
	<div class="col-md-2 pe-0 bg-blue position-relative">
		<div class="nav navbar border-bottom">
			<div></div>
			<h6 class="text-light">BẢNG ĐIỀU KHIỂN</h6>
			<div></div>
		</div>
		<div class="nav flex-column container-sidebar" style="height: 82.3vh;">
			<div class="sidebar-item">
				<a href="/customer-care/employ/customers" class="sidebar-item-title ps-3 pe-3">
					<i class="ti-user mr-3"></i>Hồ sơ khách xuất viện
				</a>
			</div>
			<div class="sidebar-item">
				<a href="/customer-care/employ/re-exam" class="sidebar-item-title ps-3 pe-3">
					<i class="fa-regular fa-calendar mr-3"></i> Danh sách lịch thay băng
				</a>
			</div>
			<div class="sidebar-item">
				<a href="/customer-care/employ/storage" class="sidebar-item-title ps-3 pe-3">
					<i class="fa-sharp fa-solid fa-boxes-packing mr-3"></i>Kho lưu trữ hồ sơ
				</a>
			</div>
		</div>
		<div class="border-top">
			<div class="sidebar-item">
				<a href="/customer-care/employ/profile" class="sidebar-item-title pl-3">
					<i class="ti-user mr-3"></i>Thông tin cá nhân
				</a>
			</div>
			<div class="sidebar-item">
				<form method="POST" action="/logout">
					<button href="/logout" class="btn btn-danger logout-btn" type="submit">Đăng xuất</>
				</form>
			</div>
		</div>
	</div>
	<div class="col-md-10 ps-0 pe-0">
		<nav class="navbar navbar-light bg-blue">
			<div class="img-container">
				<a type="button" onclick="history.back()">
					<i class="fa-solid fa-circle-arrow-left text-light fs-2 pt-2"></i>
				</a>
			</div>
			<div class="text-light text-uppercase fw-bold">
				{{this.title}}
			</div>
			<div></div>
		</nav>
		<div class="container-fluid">
			{{#if serviceNote}}
			<div class="card shadow mt-3 mb-3">
				<div class="card-body">
					<div class="row">
						<div class="col-4">
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Mã định danh:</strong>
								</label>
								<label class="fs-6 text-right text-danger">
									{{serviceNote.scheduleID.customerID.identification}}
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Họ tên khai sinh:</strong>
								</label>
								<label class="fs-6 text-right text-primary">
									{{serviceNote.scheduleID.customerID.fullName}}
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Tên thường gọi:</strong>
								</label>
								<label class="fs-6 text-right">
									{{serviceNote.scheduleID.customerID.nickName}}
								</label>
							</div>
						</div>
						<div class="col-4">
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Quê quán:</strong>
								</label>
								<label class="fs-6 text-right">
									{{serviceNote.scheduleID.customerID.homeTown}}
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Trạng thái:</strong>
								</label>
								<label class="fs-6 text-danger text-right">
									{{#each serviceNote}}
									<em>{{this.status}}</em>
									{{/each}}
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Bác sĩ thực hiện:</strong>
								</label>
								<label class="">
									{{#each serviceNote.performer}}
									<em>{{this.firstName}} {{this.lastName}}</em>
									{{/each}}
								</label>
							</div>
						</div>
						<div class="col-4">
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Chiều cao:</strong>
								</label>
								<label class="">
									<em>{{serviceNote.scheduleID.customerID.height}}</em>
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Cân nặng:</strong>
								</label>
								<label class="text-right">
									<em>{{serviceNote.scheduleID.customerID.weight}}</em>
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Ngày phẩu thuật:</strong>
								</label>
								<label class="text-right text-success">
									{{formatDate serviceNote.surgeryDay}}
								</label>
							</div>
							<div class="d-flex justify-content-between">
								<label for="status" class="text-nowrap text-dark">
									<strong>Tầng phẩu thuật:</strong>
								</label>
								<label class="text-right">
									{{serviceNote.floor}}
								</label>
							</div>
						</div>
					</div>
					<div class="d-flex justify-content-between">
						<label for="status" class="text-nowrap text-dark">
							<strong>Dịch vụ đăng ký:</strong>
						</label>
					</div>
					{{#each serviceNote.service}}
					<div class="d-flex justify-content-between border-bottom mb-3">
						<label class="text-dark-yellow">
							<em>{{this.name}}</em>
						</label>
						<label class="text-right">
							<em>{{this.price}}</em>
						</label>
					</div>
					{{/each}}
					<div class="d-flex justify-content-between">
						<label for="status" class="text-nowrap text-dark">
							<strong>Đặt cọc:</strong>
						</label>
						<label class="text-warning text-right">
							{{serviceNote.deposit}}
						</label>
					</div>
					<div class="d-flex justify-content-between">
						<label for="status" class="text-nowrap text-dark">
							<strong>Tổng chi phí:</strong>
						</label>
						<label class="text-danger text-right">
							{{serviceNote.total}}
						</label>
					</div>
					<div class="accordion accordion-flush" id="accordionFlushExample">
						<div class="accordion-item">
							<h2 class="accordion-header" id="flush-headingFive">
								<button class="accordion-button collapsed pl-0 pr-0" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseFive" aria-expanded="false" aria-controls="flush-collapseFive">
									<strong>Thông tin hậu phẩu - hồi sức</strong>
								</button>
							</h2>
							<div id="flush-collapseFive" class="accordion-collapse collapse" aria-labelledby="flush-headingFive" data-bs-parent="#accordionFlushExample">
								<div class="accordion-body">
									<div class="slideshow-container mt-3 mb-3">
										<!-- Full-width images with number and caption text -->
										{{#if serviceNote.afterImg}}
										{{#each serviceNote.afterImg}}
										<div class="slide-after-img fadeOn">
											<img class="figure-img img-fluid rounded img-cover img-center" src="{{this.url}}">
											{{!-- <img class="figure-img img-fluid rounded img-cover img-center" src="/after/img/{{this.name}}"> --}}
										</div>
										{{/each}}
										{{else}}
										<div class="slide-after-img fadeOn text-center">
											Chưa có hình ảnh
										</div>
										{{/if}}

										<!-- Next and previous buttons -->
										<a class="prev" onclick="plusSlidesAfterImg(-1)">&#10094;</a>
										<a class="next" onclick="plusSlidesAfterImg(1)">&#10095;</a>
										<!-- The dots/circles -->
										<div style="text-align:center">
											{{#each serviceNote.afterImg}}
											<span class="dot" onclick="currentSlideAfterImg({{@index}})"></span>
											{{/each}}
										</div>
									</div>
									<div class="slideshow-container mb-3">
										<!-- Full-width images with number and caption text -->
										{{#if serviceNote.afterVideo}}
										{{#each serviceNote.afterVideo}}
										<div class="slide-after-video fadeOn">
											<video class="figure-img img-fluid rounded video-cover-slide img-center" controls>
												<source src="{{this.url}}">
												{{!-- <source src="/after/video/{{this.name}}"> --}}
											</video>
										</div>
										{{/each}}
										{{else}}
										<div class="slide-after-video fadeOn text-center">
											Chưa có video
										</div>
										{{/if}}

										<!-- Next and previous buttons -->
										<a class="prev" onclick="plusSlidesAfterVideo(-1)">&#10094;</a>
										<a class="next" onclick="plusSlidesAfterVideo(1)">&#10095;</a>
										<!-- The dots/circles -->
										<div style="text-align:center">
											{{#each serviceNote.afterVideo}}
											<span class="dot" onclick="currentSlideAfterVideo({{@index}})"></span>
											{{/each}}
										</div>
									</div>
									<label for="status" class="text-nowrap">
										<strong>Tình trạng khách hàng:</strong>
									</label>
									<textarea class="form-control mb-3" cols="30" rows="8" readonly disabled>{{serviceNote.statusAfterInfo}}</textarea>
									<label for="status" class="text-nowrap">
										<strong>Chỉ định bác sĩ:</strong>
									</label>
									<textarea class="form-control mb-3" cols="30" rows="8" readonly disabled>{{serviceNote.directedByDoctor}}</textarea>
									<label for="status" class="text-nowrap">
										<strong>Các bước thực hiện:</strong>
									</label>
									<textarea class="form-control" cols="30" rows="8" readonly disabled>{{serviceNote.afterInfo}}</textarea>
								</div>
							</div>
						</div>
						<div class="accordion-item">
							<h2 class="accordion-header" id="flush-headingSix">
								<button class="accordion-button collapsed pl-0 pr-0" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseSix" aria-expanded="false" aria-controls="flush-collapseSix">
									<strong>Thông tin các lần tái khám</strong>
								</button>
							</h2>
							<div id="flush-collapseSix" class="accordion-collapse collapse" aria-labelledby="flush-headingSix" data-bs-parent="#accordionFlushExample">
								<div class="accordion-body">
									<div class="row overflow-auto">
									{{#if serviceNote.scheduleID.customerID.reexamID}}
									{{#each serviceNote.scheduleID.customerID.reexamID}}
										<div class="col-4 mb-3">
											<a href="/customer-care/employ/re-exam/{{this._id}}/detail">
												<div class="card p-3">
													<div class="d-flex justify-content-between">
														<label class="text-nowrap" for=""><strong>Trạng thái:</strong></label>
														<div class="text-nowrap">{{this.status}}</div>
													</div>
													<div class="d-flex justify-content-between">
														<label class="text-nowrap" for=""><strong>Tái khám lần:</strong></label>
														<div class="text-nowrap">{{this.times}}</div>
													</div>
													<div class="d-flex justify-content-between">
														<label class="text-nowrap" for=""><strong>Lịch hẹn:</strong></label>
														<div class="text-nowrap">{{formatDate this.schedule}}</div>
													</div>
												</div>
											</a>
										</div>
									{{/each}}
									{{else}}
										<div class="text-center">
											<label for="">Chưa có phiếu tái khám</label>
										</div>
									{{/if}}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			{{/if}}
		</div>
	</div>
</div>


<script src="/js/customer-care/customer-care-employ-customer.js"></script>
<style>
	div.preview-images>img {
		width: 30%;
	}
</style>
<nav id="sub-nav-lg" class="navbar taskbar justify-content-between">
	<div class="title">

	</div>
	<h3 class="title text-light">phiếu dịch vụ</h3>
	{{> page/sidebar/operating-room/sidebar-doctor}}

	<div class="stask">
	</div>
</nav>
<div class="container">
	<div id="alert-message" class="alert alert-{{message.color}}" role="alert">
		{{message.content}}
	</div>
	<div class="shadow p-3 mb-5 bg-body rounded">
		{{#each serviceNotes}}
		<div class="row">

			<h5 class="text-uppercase text-center">
				<strong>Phiếu thực hiện</strong>
			</h5>
		</div>

		<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active btn-light" id="pills-profile-customer-tab" data-bs-toggle="pill"
					data-bs-target="#pills-profile-customer" type="button" role="tab" aria-controls="pills-home"
					aria-selected="true">Thông tinh</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link  btn-light" id="pills-profile-tab" data-bs-toggle="pill"
					data-bs-target="#pills-service" type="button" role="tab" aria-controls="pills-profile"
					aria-selected="false">Dịch vụ</button>
			</li>
		</ul>
		<form method="POST" id="submit-doctor-form" >
		</form>

			<div class="tab-content" id="pills-tabContent">

				<div class="row">
					<div class="col-md-6">
						<label class="ml-4 text-success">
							<strong> Khách hàng: </strong>&nbsp;&nbsp;
						</label>
						<label for="">
							{{this.customerID.firstName}}{{this.customerID.lastName}}
						</label>
					</div>
					<div class="col-md-6">
						<div class="text-right text-success mt-3">
							<label class=" mr-4"><em>{{formatDate this.schedule}}</em></label>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<div class="text-left ml-4">
							<label for="service">
								<strong>Reception:</strong>&nbsp;&nbsp;
							</label>
							<label for="service-name">
								<em>{{this.recept.firstName}}{{this.recept.lastName}}</em>
							</label>
						</div>
					</div>

					<div class="col-md-6">
						<div class="text-right mr-4">
							<label for="status">
								<strong>Trạng thái:</strong>&nbsp;&nbsp;
							</label>
							<label class="text-danger">
								<em>{{this.status}}</em>
							</label>
						</div>
					</div>
				</div>
				<hr>



				<div class="tab-pane fade show active" id="pills-profile-customer" role="tabpanel"
					aria-labelledby="pills-home-tab">
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="text-left ml-4">
								<label for="service">
									<strong>Dịch vụ: </strong>
								</label>

							</div>
						</div>

						<div class="col-md-6">
							<div class="text-right mr-4">

								<label for="service-name">
									<em>{{this.service}}</em>
								</label>
							</div>
						</div>
					</div>
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="text-left ml-4">
								<label for="status">
									<strong>Bác sĩ: </strong>
								</label>
							</div>
						</div>

						<div class="col-md-6">
							<div class="text-right mr-4">

								<label class="text-primary">
									{{#each this.performer}}
									<em>{{this.firstName}} {{this.lastName}};</em>
									{{/each}}
								</label>
							</div>
						</div>
					</div>
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="text-left ml-4">
								<label for="service">
									<strong>Y tá:</strong>
								</label>
							</div>
						</div>

						<div class="col-md-6">
							<div class="text-right mr-4">

								<label class="text-primary">
									{{#each nursing}}
									<em>{{this.firstName}} {{this.lastName}};</em>
									{{/each}}
								</label>
							</div>
						</div>
					</div>
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="text-left ml-4">
								<label for="service">
									<strong>Ghi chú:</strong>
								</label>
							</div>
						</div>

						<div class="col-md-6">
							<div class="text-right mr-4">
								{{#each comments}}
								<label class="">
									<em>{{this.comment}}</em>
								</label>
								{{else}}
								<label class="">
									<em>Không có ghi chú</em>
								</label>
								{{/each}}
							</div>
						</div>
					</div>

				</div>
				<div class="tab-pane fade  " id="pills-service" role="tabpanel" aria-labelledby="pills-profile-tab">
					<div class="row">
						<div class="col-md-3 text-left">
							<div class="service mt-3 ">
								<label class=" ml-4"><strong>Dịch vụ:</strong></label>
							</div>
						</div>

					</div>
					{{#each services}}
					<div class="row">
						<div class="col-md-3 text-left">
							<div class="service mt-3 ">
								<label class=" ml-4"><strong>{{this.service}}</strong></label>
							</div>
						</div>

						<div class="col-md-9 row">


						</div>
					</div>
					{{/each }}
				</div>
			</div>
			<hr>
			<div class="row">
				<div class="col-md-6">
					<div class="text-left ml-4">
						<label for="service">
							<strong>Tổng cộng:</strong>&nbsp;&nbsp;
						</label>
						<label for="">
							<em>
								{{this.price}} VND
							</em>
						</label>
					</div>
				</div>

				<div class="col-md-6 text-right">

					<button type="button" data-bs-toggle="modal" data-bs-target="#submit-doctor-modal"
						class="btn btn-success" data-id="{{this._id}}">Hoàn thành</button>
				</div>
			</div>
			{{else}}
			<div class="text-center">Chưa có dịch vụ cần thực hiện.</div>
			{{/each }}


	</div>
	<div class="modal fade" id="submit-doctor-modal" tabindex="-1" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Hoàn thành</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					Đẫ hoàn thành dịch vụ
				</div>
				<div class="modal-footer">
					<button id="submit-form-doctor-btn" type="button" class="btn btn-danger">Đã hoàn thành</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Không</button>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="/js/operating/doctor.js"></script>
{{!--
<script>

	document.addEventListener('DOMContentLoaded', function () {
		let imagesPreviewBefore = function (input, placeToInsertImagePreview) {
			if (input.files) {
				let filesAmount = input.files.length;
				for (i = 0; i < filesAmount; i++) {
					let reader = new FileReader();
					reader.onload = function (event) {
						$($.parseHTML("<img class='col-md rounded mx-auto d-block'>"))
							.attr("src", event.target.result)
							.appendTo(placeToInsertImagePreview);
					};
					reader.readAsDataURL(input.files[i]);
				}
			}
		};
		var inputMultiFileBefore = document.getElementById('input-multi-files-before');
		inputMultiFileBefore.addEventListener('change', (e) => {
			imagesPreviewBefore(e.target, "div.preview-images-before");
			console.log(e.target.files)
		})


		let imagesPreviewAfter = function (input, placeToInsertImagePreview) {
			if (input.files) {
				let filesAmount = input.files.length;
				for (i = 0; i < filesAmount; i++) {
					let reader = new FileReader();
					reader.onload = function (event) {
						$($.parseHTML("<img class='col-md rounded mx-auto d-block'>"))
							.attr("src", event.target.result)
							.appendTo(placeToInsertImagePreview);
					};
					reader.readAsDataURL(input.files[i]);
				}
			}
		};

		var inputMultiFileAfter = document.getElementById('input-multi-files-after');
		inputMultiFileAfter.addEventListener('change', (e) => {
			imagesPreviewAfter(e.target, "div.preview-images-after");
			console.log(e.target.files)
		})
	});
</script> --}}
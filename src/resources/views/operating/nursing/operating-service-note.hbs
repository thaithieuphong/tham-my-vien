<nav id="sub-nav-lg" class="navbar taskbar justify-content-between">
	<div class="title">
	</div>
	<h3 class="title text-light sticky-top">Dịch vụ</h3>
	<div class="stask">
	</div>
</nav>
{{> page/sidebar/operating-room/sidebar-nursing-service}}
<div class="container-fluid mt-3">
	<div id="alert-message" class="alert alert-{{message.color}}" role="alert">
		{{message.content}}
	</div>
	<div class="shadow p-3 mb-5 bg-body rounded">
		{{#each serviceNote}}
		<div class="row">
			<h5 class="text-uppercase text-center mb-4">
				<strong>Phiếu phẩu thuật</strong>
			</h5>
		</div>

		<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active" id="pills-profile-customer-tab" data-bs-toggle="pill"
					data-bs-target="#pills-profile-customer" type="button" role="tab" aria-controls="pills-home"
					aria-selected="true">Thông tin khách hàng</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link " id="pills-counselor-tab" data-bs-toggle="pill"
					data-bs-target="#pills-counselor" type="button" role="tab" aria-controls="pills-counselor"
					aria-selected="false">Hình ảnh tư vấn</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link " id="pills-before-tab" data-bs-toggle="pill" data-bs-target="#pills-before"
					type="button" role="tab" aria-controls="pills-before" aria-selected="false">Hình ảnh trước
					phẩu</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link " id="pills-after-tab" data-bs-toggle="pill" data-bs-target="#pills-after"
					type="button" role="tab" aria-controls="pills-after" aria-selected="false">Hình ảnh sau
					phẩu</button>
			</li>
		</ul>

		<div class="tab-content" id="pills-tabContent">
			<div class="row ">
				<div class="col-md-6">
					<div class="text-left ml-4">
						<div class=" text-success">
							<label class=" mr-4"><em>{{this.schedule}}</em></label>
						</div>
					</div>
				</div>

				<div class="col-md-6">
					<div class="ml-4 mr-4">
						<label for="status">
							<strong>Trạng thái:</strong>&nbsp;&nbsp;
						</label>
						<label class="text-danger">
							<em>{{this.status}}</em>
						</label>
					</div>
				</div>
			</div>

			<div class="row mt-3">
				<div class="col-md-6">
					<label class="ml-4 text-success">
						<strong> Khách hàng: </strong>&nbsp;&nbsp;
					</label>
					<label for="">
						{{this.customerID.firstName}}{{this.customerID.lastName}}
					</label>
				</div>
				<div class="col-md-6">
					<div class="ml-4 mr-4">
						<label for="reception">
							<strong>Lễ tân:</strong>&nbsp;&nbsp;
						</label>
						<label for="reception-name">
							<em>{{this.recept.firstName}}{{this.recept.lastName}}</em>
						</label>
					</div>
				</div>
			</div>
			<div class="row mt-3">
				<div class="col-md-6">
					<div class="text-left ml-4">
						<label for="service">
							<strong>Dịch vụ:</strong>&nbsp; &nbsp;
						</label>
						<label for="service-name">
							<em>{{this.service}}</em>
						</label>
					</div>
				</div>
			</div>

			<hr>

			<div class="tab-pane fade show active" id="pills-profile-customer" role="tabpanel"
				aria-labelledby="pills-home-tab">
				<form method="POST" id="submit-doctor-form">
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="text-left ml-4">
								<label for="status">
									<strong>Bác sĩ: </strong>
								</label>
							</div>
						</div>

						<div class="col-md-6">
							<div class="ml-4 mr-4">

								<label class="text-primary">
									{{#each this.performer}}
									<input hidden type="text" name="operatingID[]" value="{{this._id}}">
									<em>{{this.firstName}} {{this.lastName}};</em>
									{{/each}}
								</label>
							</div>
						</div>
					</div>
					<div class="row mt-4">
						<div class="col-md-6">
							<div class="text-left ml-4">
								<label for="service">
									<strong>Y tá:</strong>
								</label>
							</div>
						</div>

						<div class="col-md-6">
							<div class="ml-4 mr-4">
								<label class="text-primary">
									{{#each this.nursing}}
									<input hidden type="text" name="operatingID[]" value="{{this._id}}">
									<em>{{this.firstName}} {{this.lastName}};</em>
									{{/each}}
								</label>

							</div>
						</div>
					</div>
				</form>

				<div class="row mt-4">
					<div class="col-md-6">
						<div class="text-left ml-4">
							<label for="service">
								<strong>Ghi chú:</strong>
							</label>
						</div>
					</div>

					<div class="col-md-6">
						<div class="ml-4 mr-4">
							{{#each this.comments}}
							<label class="">
								<em>{{this.comment}}</em>
							</label>
							{{else}}
							<label class="">
								<em>Không có ghi chú</em>
							</label>
							{{/each}}
						</div>
					</div>
				</div>
			</div>

			<div class="tab-pane fade" id="pills-counselor" role="tabpanel" aria-labelledby="pills-profile-tab">
				<div class="row">
					<div class="col-md-6 row">
						{{#each this.counselorImg}}
						{{#if this.counselorImg}}
						<div class="col-md-6 mt-2">
							<img src="/counselor/img/{{this}}" class="rounded mx-auto d-block upd-ava" alt="...">
						</div>
						{{else}}
						<div class="col-md-6 mt-2">
							<h6>Chưa có ảnh</h6>
						</div>
						{{/if}}
						{{/each}}
					</div>
					<div class="col-md-6 row">
						{{#each this.counselorVideo}}
						{{#if this.counselorVideo}}
						<div class="col-md-6 mt-2">
							<video class="rounded mx-auto d-block upd-ava" controls>
								<source src="/counselor/video/{{this}}" type="video/mp4">
							</video>
						</div>
						{{else}}
						<div class="col-md-6 mt-2">
							<h6>Chưa có video</h6>
						</div>
						{{/if}}
						{{/each}}
					</div>
				</div>
			</div>

			<div class="tab-pane fade  " id="pills-before" role="tabpanel" aria-labelledby="pills-profile-tab">
				<div class="row">
					<div class="col-md-6 row ">
						{{#each this.beforeImg}}
						{{#if this.beforeImg}}
						<div class="col-md-6">
							<img src="/before/img/{{this}}" class="rounded mx-auto d-block upd-ava" alt="...">
						</div>
						{{else}}
						<div class="col-md-6 mt-2">
							<h6>Chưa có ảnh</h6>
						</div>
						{{/if}}
						{{/each}}
					</div>
					<div class="col-md-6 row">
						{{#each this.beforeVideo}}
						{{#if this.beforeVideo}}
						<div class="col-md-6 mt-2">
							<video class="rounded mx-auto d-block upd-ava" controls>
								<source src="/before/video/{{this}}" type="video/mp4">
							</video>
						</div>
						{{else}}
						<div class="col-md-6 mt-2">
							<h6>Chưa có video</h6>
						</div>
						{{/if}}
						{{/each}}
					</div>
				</div>

				<form method="POST" id="upload-img-before-form" enctype="multipart/form-data">
					<div class="row">
						<input hidden type="text" value="{{this.customerID._id}}" name="customerID">
						<div class="col-sm-6">
							<label for="input-multi-images-before"
								class="label-avt btn btn-primary btn-upload-mobile mt-2">
								<h6>Chọn ảnh trước phẩu</h6>
							</label>
							<div class="preview-images-before row ml-0 mt-3 border"></div>
							<input id="input-multi-images-before" class="form-control" type="file" name="before" hidden
								multiple>
						</div>
						<div class="col-sm-6">
							<label for="input-multi-videos-before"
								class="label-avt btn btn-primary btn-upload-mobile mt-2">
								<h6>Chọn video trước phẩu</h6>
							</label>
							<div class="preview-videos-before row ml-0 mt-3 border"></div>
							<input id="input-multi-videos-before" class="form-control" type="file" name="before" hidden
								multiple>
						</div>
					</div>

				</form>
				<div class=" d-flex justify-content-center mt-4">
					<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#before-modal"
						data-before-id="{{this._id}}">Tải lên</button>
				</div>
			</div>

			<div class="tab-pane fade" id="pills-after" role="tabpanel" aria-labelledby="pills-profile-tab">
				<div class="row">
					<div class="col-md-6 row">
						{{#each this.afterImg}}
						{{#if this.afterImg}}
						<div class="col-md-6 mt-2">
							<img src="/after/img/{{this}}" class="rounded mx-auto d-block upd-ava" alt="...">

						</div>
						{{else}}
						<div class="col-md-6 mt-2">
							<h6>Chưa có ảnh</h6>
						</div>
						{{/if}}
						{{/each}}
					</div>
					<div class="col-md-6 row">
						{{#each this.afterVideo}}
						{{#if this.afterVideo}}
						<div class="col-md-6 mt-2">
							<video class="rounded mx-auto d-block upd-ava" controls>
								<source src="/after/video/{{this}}" type="video/mp4">
							</video>
						</div>
						{{else}}
						<div class="col-md-6 mt-2">
							<h6>Chưa có video</h6>
						</div>
						{{/if}}
						{{/each}}
					</div>
				</div>

				{{!--upload multi after--}}
				<form method="POST" id="upload-img-after-form" enctype="multipart/form-data">
					<div class="row">
						<input hidden type="text" value="{{this.customerID._id}}" name="customerID">
						<div class="col-sm-6">
							<label for="input-multi-images-after"
								class="label-avt btn btn-primary btn-upload-mobile mt-2">
								<h6>Chọn ảnh sau phẩu</h6>
							</label>
							<div class="preview-images-after row ml-0 mt-3 border"></div>
							<input id="input-multi-images-after" class="form-control" type="file" name="after" hidden
								multiple>
						</div>
						<div class="col-sm-6">
							<label for="input-multi-videos-after"
								class="label-avt btn btn-primary btn-upload-mobile mt-2">
								<h6>Chọn video sau phẩu</h6>
							</label>
							<div class="preview-videos-after row ml-0 mt-3 border"></div>
							<input id="input-multi-videos-after" class="form-control" type="file" name="after" hidden
								multiple>
						</div>
					</div>
				</form>
				<div class=" d-flex justify-content-center mt-4">
					<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#after-modal"
						data-after-id="{{this._id}}">Tải lên</button>
				</div>
			</div>
		</div>
		<hr>
		<div class="row">
			<div class="col-md-6">
				<div class="text-left ml-4">
					<label for="service">
						<strong>Tổng cộng:</strong>&nbsp;&nbsp;
					</label>
					<label for="">
						<em>
							{{this.price}} VND
						</em>
					</label>
				</div>
			</div>
			<div class="col-md-6 ml-4">
				<button type="button" data-bs-toggle="modal" data-bs-target="#submit-doctor-modal"
					class="btn btn-success" data-id="{{this._id}}">Hoàn thành</button>
			</div>
		</div>
		{{else}}
		<div class="text-center">
			Chưa có phiếu phẩu thuật
		</div>
		{{/each}}
	</div>
	{{!-- Complete service-note --}}
	<div class="modal fade" id="submit-doctor-modal" tabindex="-1" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Hoàn thành</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					Đẫ hoàn thành dịch vụ
				</div>
				<div class="modal-footer">
					<button id="submit-form-doctor-btn" type="button" class="btn btn-danger">Đã hoàn thành</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Không</button>
				</div>
			</div>
		</div>
	</div>
	{{!-- Confirm modal before --}}
	<div class="modal fade" id="before-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Tải ảnh trước phẩu thuật</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					Chắc chắn tải lên
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="upload-img-before-btn">Có, chắc chắn</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Không</button>
				</div>
			</div>
		</div>
	</div>
	{{!-- Confirm modal after --}}
	<div class="modal fade" id="after-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Tải ảnh sau phẩu thuật</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					Chắc chắn tải lên
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="upload-img-after-btn">Có, chắc chắn</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Không</button>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="/js/operating/nursing.js"></script>